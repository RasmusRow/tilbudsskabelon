<template>
  <header class="flex sticky top-0 mt-12 z-10 items-center bg-[#fff] h-20">
    <div class="container mx-auto items-center flex">
      <NuxtLink to="/">
        <ClientOnly>
          <PrismicImage v-if="globalSettings?.logo" :field="globalSettings?.logo" class="h-6" />
          <template #fallback>
            <svg class="h-6" viewBox="0 0 3564 303" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M3563.66 297H3481.66L3433.66 217V297H3359.66V17H3433.66V174.6L3475.66 97H3559.66L3498.86 197L3563.66 297Z"
                fill="black"></path>
              <path
                d="M3253.48 17H3327.48V297H3253.48V279C3240.68 294.733 3222.81 302.6 3199.88 302.6C3172.95 302.6 3150.95 292.6 3133.88 272.6C3116.81 252.6 3108.28 227.4 3108.28 197C3108.28 166.6 3116.81 141.4 3133.88 121.4C3150.95 101.4 3172.95 91.4 3199.88 91.4C3222.81 91.4 3240.68 99.2667 3253.48 115V17ZM3191.88 223.8C3198.55 231 3207.21 234.6 3217.88 234.6C3228.55 234.6 3237.08 231 3243.48 223.8C3250.14 216.6 3253.48 207.667 3253.48 197C3253.48 186.333 3250.14 177.4 3243.48 170.2C3237.08 163 3228.55 159.4 3217.88 159.4C3207.21 159.4 3198.55 163 3191.88 170.2C3185.48 177.4 3182.28 186.333 3182.28 197C3182.28 207.667 3185.48 216.6 3191.88 223.8Z"
                fill="black"></path>
              <path
                d="M3089.57 289.8C3080.77 298.6 3069.97 303 3057.17 303C3044.37 303 3033.44 298.6 3024.37 289.8C3015.57 280.733 3011.17 269.8 3011.17 257C3011.17 244.2 3015.57 233.4 3024.37 224.6C3033.44 215.533 3044.37 211 3057.17 211C3069.97 211 3080.77 215.533 3089.57 224.6C3098.64 233.4 3103.17 244.2 3103.17 257C3103.17 269.8 3098.64 280.733 3089.57 289.8Z"
                fill="black"></path>
              <path
                d="M2910.69 91.4004C2932.56 91.4004 2950.03 99.0004 2963.09 114.2C2976.43 129.134 2983.09 151.534 2983.09 181.4V297H2909.09V189.4C2909.09 171.534 2900.83 162.6 2884.29 162.6C2875.49 162.6 2868.69 165.4 2863.89 171C2859.36 176.6 2857.09 184.334 2857.09 194.2V297H2783.09V97.0004H2857.09V116.6C2869.36 99.8004 2887.23 91.4004 2910.69 91.4004Z"
                fill="black"></path>
              <path
                d="M2652.21 302.6C2622.34 302.6 2596.87 292.467 2575.81 272.2C2555.01 251.934 2544.61 226.867 2544.61 197C2544.61 167.134 2555.01 142.067 2575.81 121.8C2596.61 101.534 2622.07 91.4004 2652.21 91.4004C2682.34 91.4004 2707.81 101.534 2728.61 121.8C2749.41 142.067 2759.81 167.134 2759.81 197C2759.81 226.867 2749.41 251.934 2728.61 272.2C2707.81 292.467 2682.34 302.6 2652.21 302.6ZM2627.81 222.6C2634.21 229 2642.34 232.2 2652.21 232.2C2662.07 232.2 2670.07 229 2676.21 222.6C2682.61 215.934 2685.81 207.4 2685.81 197C2685.81 186.6 2682.61 178.2 2676.21 171.8C2670.07 165.134 2662.07 161.8 2652.21 161.8C2642.34 161.8 2634.21 165.134 2627.81 171.8C2621.67 178.2 2618.61 186.6 2618.61 197C2618.61 207.4 2621.67 215.934 2627.81 222.6Z"
                fill="black"></path>
              <path d="M2448.33 297V5H2522.33V297H2448.33Z" fill="black"></path>
              <path
                d="M2290.5 222.2C2296.9 235.534 2310.5 242.2 2331.3 242.2C2343.57 242.2 2354.9 237.934 2365.3 229.4L2413.7 270.2C2393.7 291.8 2365.43 302.6 2328.9 302.6C2294.77 302.6 2267.3 292.734 2246.5 273C2225.97 253 2215.7 227.934 2215.7 197.8C2215.7 167.4 2225.7 142.067 2245.7 121.8C2265.97 101.534 2291.43 91.4004 2322.1 91.4004C2352.5 91.4004 2377.43 101.4 2396.9 121.4C2416.63 141.134 2426.5 166.067 2426.5 196.2C2426.5 205 2425.43 213.667 2423.3 222.2H2290.5ZM2289.3 174.6H2356.5C2351.97 158.6 2341.17 150.6 2324.1 150.6C2306.77 150.6 2295.17 158.6 2289.3 174.6Z"
                fill="black"></path>
              <path
                d="M2109.52 91.4C2136.46 91.4 2158.46 101.4 2175.52 121.4C2192.59 141.4 2201.12 166.6 2201.12 197C2201.12 227.4 2192.59 252.6 2175.52 272.6C2158.46 292.6 2136.46 302.6 2109.52 302.6C2086.59 302.6 2068.72 294.733 2055.92 279V297H1981.92V17H2055.92V115C2068.72 99.2667 2086.59 91.4 2109.52 91.4ZM2065.52 223.8C2072.19 231 2080.86 234.6 2091.52 234.6C2102.19 234.6 2110.72 231 2117.12 223.8C2123.79 216.6 2127.12 207.667 2127.12 197C2127.12 186.333 2123.79 177.4 2117.12 170.2C2110.72 163 2102.19 159.4 2091.52 159.4C2080.86 159.4 2072.19 163 2065.52 170.2C2059.12 177.4 2055.92 186.333 2055.92 197C2055.92 207.667 2059.12 216.6 2065.52 223.8Z"
                fill="black"></path>
              <path
                d="M1875.74 97.0004H1949.74V297H1875.74V279C1862.94 294.734 1845.08 302.6 1822.14 302.6C1795.21 302.6 1773.21 292.6 1756.14 272.6C1739.08 252.6 1730.54 227.4 1730.54 197C1730.54 166.6 1739.08 141.4 1756.14 121.4C1773.21 101.4 1795.21 91.4004 1822.14 91.4004C1845.08 91.4004 1862.94 99.2671 1875.74 115V97.0004ZM1814.14 223.8C1820.81 231 1829.48 234.6 1840.14 234.6C1850.81 234.6 1859.34 231 1865.74 223.8C1872.41 216.6 1875.74 207.667 1875.74 197C1875.74 186.334 1872.41 177.4 1865.74 170.2C1859.34 163 1850.81 159.4 1840.14 159.4C1829.48 159.4 1820.81 163 1814.14 170.2C1807.74 177.4 1804.54 186.334 1804.54 197C1804.54 207.667 1807.74 216.6 1814.14 223.8Z"
                fill="black"></path>
              <path
                d="M1737.48 297H1655.48L1607.48 217V297H1533.48V17H1607.48V174.6L1649.48 97H1733.48L1672.68 197L1737.48 297Z"
                fill="black"></path>
              <path
                d="M1411.33 155.8C1411.33 159 1413.73 161.534 1418.53 163.4C1423.6 165.267 1429.87 166.734 1437.33 167.8C1444.8 168.6 1452.8 170.334 1461.33 173C1469.87 175.667 1477.87 179 1485.33 183C1492.8 187 1498.93 193.4 1503.73 202.2C1508.8 210.734 1511.33 221.134 1511.33 233.4C1511.33 246.2 1508.4 257.4 1502.53 267C1496.93 276.6 1489.47 283.8 1480.13 288.6C1470.8 293.4 1461.2 296.867 1451.33 299C1441.73 301.4 1431.73 302.6 1421.33 302.6C1373.07 302.6 1341.87 286.734 1327.73 255L1392.13 226.2C1397.2 239.8 1406.67 246.6 1420.53 246.6C1429.6 246.6 1434.13 243.667 1434.13 237.8C1434.13 234.334 1430.8 231.534 1424.13 229.4C1417.47 227.267 1409.47 225.134 1400.13 223C1390.8 220.6 1381.33 217.534 1371.73 213.8C1362.4 209.8 1354.4 203.267 1347.73 194.2C1341.07 185.134 1337.73 173.8 1337.73 160.2C1337.73 138.334 1346 121.4 1362.53 109.4C1379.33 97.4004 1398.67 91.4004 1420.53 91.4004C1464.27 91.4004 1493.2 108.334 1507.33 142.2L1446.13 164.2C1441.33 153 1433.87 147.4 1423.73 147.4C1415.47 147.4 1411.33 150.2 1411.33 155.8Z"
                fill="black"></path>
              <path
                d="M1229.69 155.8C1229.69 159 1232.09 161.534 1236.89 163.4C1241.96 165.267 1248.23 166.734 1255.69 167.8C1263.16 168.6 1271.16 170.334 1279.69 173C1288.23 175.667 1296.23 179 1303.69 183C1311.16 187 1317.29 193.4 1322.09 202.2C1327.16 210.734 1329.69 221.134 1329.69 233.4C1329.69 246.2 1326.76 257.4 1320.89 267C1315.29 276.6 1307.83 283.8 1298.49 288.6C1289.16 293.4 1279.56 296.867 1269.69 299C1260.09 301.4 1250.09 302.6 1239.69 302.6C1191.43 302.6 1160.23 286.734 1146.09 255L1210.49 226.2C1215.56 239.8 1225.03 246.6 1238.89 246.6C1247.96 246.6 1252.49 243.667 1252.49 237.8C1252.49 234.334 1249.16 231.534 1242.49 229.4C1235.83 227.267 1227.83 225.134 1218.49 223C1209.16 220.6 1199.69 217.534 1190.09 213.8C1180.76 209.8 1172.76 203.267 1166.09 194.2C1159.43 185.134 1156.09 173.8 1156.09 160.2C1156.09 138.334 1164.36 121.4 1180.89 109.4C1197.69 97.4004 1217.03 91.4004 1238.89 91.4004C1282.63 91.4004 1311.56 108.334 1325.69 142.2L1264.49 164.2C1259.69 153 1252.23 147.4 1242.09 147.4C1233.83 147.4 1229.69 150.2 1229.69 155.8Z"
                fill="black"></path>
              <path
                d="M1051.92 17H1125.92V297H1051.92V279C1039.12 294.733 1021.25 302.6 998.316 302.6C971.382 302.6 949.382 292.6 932.316 272.6C915.249 252.6 906.716 227.4 906.716 197C906.716 166.6 915.249 141.4 932.316 121.4C949.382 101.4 971.382 91.4 998.316 91.4C1021.25 91.4 1039.12 99.2667 1051.92 115V17ZM990.316 223.8C996.982 231 1005.65 234.6 1016.32 234.6C1026.98 234.6 1035.52 231 1041.92 223.8C1048.58 216.6 1051.92 207.667 1051.92 197C1051.92 186.333 1048.58 177.4 1041.92 170.2C1035.52 163 1026.98 159.4 1016.32 159.4C1005.65 159.4 996.982 163 990.316 170.2C983.916 177.4 980.716 186.333 980.716 197C980.716 207.667 983.916 216.6 990.316 223.8Z"
                fill="black"></path>
              <path
                d="M810.219 97H884.219V297H810.219V277.4C797.952 294.2 780.085 302.6 756.619 302.6C734.752 302.6 717.152 295.133 703.819 280.2C690.752 265 684.219 242.467 684.219 212.6V97H758.219V204.6C758.219 222.467 766.485 231.4 783.019 231.4C791.819 231.4 798.485 228.6 803.019 223C807.819 217.4 810.219 209.667 810.219 199.8V97Z"
                fill="black"></path>
              <path
                d="M571.241 91.4C598.174 91.4 620.174 101.4 637.241 121.4C654.307 141.4 662.841 166.6 662.841 197C662.841 227.4 654.307 252.6 637.241 272.6C620.174 292.6 598.174 302.6 571.241 302.6C548.307 302.6 530.441 294.733 517.641 279V297H443.641V17H517.641V115C530.441 99.2667 548.307 91.4 571.241 91.4ZM527.241 223.8C533.907 231 542.574 234.6 553.241 234.6C563.907 234.6 572.441 231 578.841 223.8C585.507 216.6 588.841 207.667 588.841 197C588.841 186.333 585.507 177.4 578.841 170.2C572.441 163 563.907 159.4 553.241 159.4C542.574 159.4 533.907 163 527.241 170.2C520.841 177.4 517.641 186.333 517.641 197C517.641 207.667 520.841 216.6 527.241 223.8Z"
                fill="black"></path>
              <path d="M337.781 297V5H411.781V297H337.781Z" fill="black"></path>
              <path
                d="M269.122 81.8002C257.922 81.8002 248.189 77.8002 239.922 69.8002C231.922 61.5335 227.922 51.9335 227.922 41.0002C227.922 30.0669 231.922 20.6002 239.922 12.6002C248.189 4.33353 257.922 0.200195 269.122 0.200195C280.055 0.200195 289.522 4.33353 297.522 12.6002C305.789 20.6002 309.922 30.0669 309.922 41.0002C309.922 51.9335 305.789 61.5335 297.522 69.8002C289.522 77.8002 280.055 81.8002 269.122 81.8002ZM231.922 297V97.0002H305.922V297H231.922Z"
                fill="black"></path>
              <path d="M212 17V94.6H146V297H66V94.6H0V17H212Z" fill="black"></path>
            </svg>
          </template>
        </ClientOnly>
      </NuxtLink>

      <div class="ml-auto flex space-x-10 items-center">
        <Button v-for="item in globalSettings?.menu_items" :key="item.label" 
          :link="getNavigationUrl(item.link)"
          class="text-lg" 
          :kind="getNavigationUrl(item.link) === '/lav-tilbud' ? 'primary' : 'link'">
          {{ item.label }}
        </Button>

        <Button
          link="/lav-tilbud"
          class="text-lg"
          kind="primary"
        >
          Lav et tilbud
        </Button>
      </div>
    </div>
  </header>
</template>

<script setup>
const { getGlobalSettings } = usePrismicData()

// Fetch global settings from Prismic
const { data: globalSettings } = await useAsyncData('global-settings', () => getGlobalSettings())

// Function to extract the correct URL from Prismic link
const getNavigationUrl = (link) => {
  if (!link) return null
  
  // If it's already a URL string, return it
  if (typeof link === 'string') {
    return link
  }
  
  // If it's a Prismic document link, use the uid to create the route
  if (link.uid) {
    return `/${link.uid}`
  }
  
  // If it has a url property, use that
  if (link.url) {
    return link.url
  }
  
  return null
}

console.log(globalSettings)
</script>

<style></style>